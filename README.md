<xaiArtifact artifact_id="1ac44f68-43e9-4a43-9d29-1734e5cbd314" artifact_version_id="3f4f96a1-6419-4207-a0bb-6bdc09cfcd1d" title="README.md" contentType="text/markdown">

# ๐ ฺฉุชุงุจุฎุงูู MarketStructureLibrary - ุงุจุฒุงุฑ ุฌุงูุน ุชุญูู ุจุงุฒุงุฑ ุจุฑุง MQL5

**MarketStructureLibrary.mqh** ฺฉ ฺฉุชุงุจุฎุงูู ูุฏุฑุชููุฏ ู ููุนุทู ุจุฑุง MetaTrader 5 ุงุณุช ฺฉู ุจุฑุง ุชุญูู ูพุดุฑูุชู ุณุงุฎุชุงุฑ ุจุงุฒุงุฑ ู ุดูุงุณุง ุดฺฉุงู ุงุฑุฒุด ููุตูุงูู (FVG) ุทุฑุงุญ ุดุฏู ุงุณุช. ุงู ฺฉุชุงุจุฎุงูู ุจุง ูพุดุชุจุงู ุงุฒ ฺูุฏ ุชุงูโูุฑู ู ฺูุฏ ููุงุฏุ ุงุจุฒุงุฑูุง ูู ุจุฑุง ูพุงุฏูโุณุงุฒ ููุงูู Smart Money Concepts (SMC) ู ุงุณุชุฑุงุชฺโูุง ูุนุงููุงุช ูุจุชู ุจุฑ FVG ุฏุฑ ุงุฎุชุงุฑ ูุนุงูููโฺฏุฑุงู ู ุชูุณุนูโุฏููุฏฺฏุงู ูุฑุงุฑ ูโุฏูุฏ. ๐

---

## โจ ูฺฺฏโูุง

- **ูพุดุชุจุงู ุงุฒ ฺูุฏ ุชุงูโูุฑู (MTF)**: ุงูฺฉุงู ุชุญูู ุณุงุฎุชุงุฑ ุจุงุฒุงุฑ ู FVG ุฏุฑ ุชุงูโูุฑูโูุง ูุฎุชูู ุจู ุตูุฑุช ููุฒูุงู. ๐
- **ูพุดุชุจุงู ุงุฒ ฺูุฏ ููุงุฏ**: ูุงุจูุช ฺฉุงุฑ ุจุง ูุฑ ููุงุฏ ูุนุงููุงุช ูพุดุชุจุงูโุดุฏู ุชูุณุท MetaTrader 5. ๐น
- **ููุงูู Smart Money Concepts (SMC)**: ุดูุงุณุง ุณููโูุง ุจุงูุงุชุฑ (HH)ุ ฺฉูโูุง ุจุงูุงุชุฑ (HL)ุ ุณููโูุง ูพุงูโุชุฑ (LH)ุ ฺฉูโูุง ูพุงูโุชุฑ (LL)ุ ุดฺฉุณุช ุณุงุฎุชุงุฑ (BoS) ู ุชุบุฑ ฺฉุงุฑุงฺฉุชุฑ (CHoCH). ๐
- **ุดูุงุณุง ุดฺฉุงู ุงุฑุฒุด ููุตูุงูู (FVG)**: ุชุดุฎุต FVGูุง ุตุนูุฏ ู ูุฒูู ุจุง ููุชุฑูุง ูุงุจู ุชูุธู ู ููุทู ุงุจุทุงู ุฏุฑ ูุญุธู. ๐
- **ููุงุด ฺฏุฑุงูฺฉ**: ุชุฑุณู ููุงุท ูุญูุฑุ ููุงุญ FVGุ ุณุทูุญ ูุจููุงฺ ู ูุจูโูุง ุฑููุฏ ุฑู ฺุงุฑุช ุจุง ูพุณููุฏ ุชุงูโูุฑู ุจุฑุง ูุถูุญ ุจุดุชุฑ. ๐จ
- **ูุฏุฑุช ุจููู ููุงุจุน**: ูุญุฏูุฏ ฺฉุฑุฏู ุฐุฎุฑู FVG ุจู 30 ููุฑุฏ ุจุฑุง ุจูููโุณุงุฒ ุนููฺฉุฑุฏ ู ูุตุฑู ุญุงูุธู. โ๏ธ
- **ุณุณุชู ูุงฺฏโฺฏุฑ**: ุงุฑุงุฆู ูุงฺฏโูุง ุฏูู ุจุฑุง ุฏุจุงฺฏ ู ูุงูุชูุฑูฺฏุ ุจุง ูุงุจูุช ูุนุงู/ุบุฑูุนุงู ฺฉุฑุฏู. ๐ฅ๏ธ
- **ุณุงุฒฺฏุงุฑ**: ุทุฑุงุญ ุดุฏู ุจุฑุง ฺฉุงุฑ ุจุฏูู ูุดฺฉู ุฏุฑ ุชูุงู ูุณุฎูโูุง MetaTrader 5 ุจุฏูู ูุดุฏุงุฑ ุชุจุฏู ููุน ุถูู. โ

---

## ๐๏ธ ุงุฌุฒุง

ุงู ฺฉุชุงุจุฎุงูู ุดุงูู ุฏู ฺฉูุงุณ ุงุตู ุงุณุช ฺฉู ูุฑ ฺฉุฏุงู ุฌูุจู ุฎุงุต ุงุฒ ุชุญูู ุจุงุฒุงุฑ ุฑุง ูุฏุฑุช ูโฺฉููุฏ:

### 1. **ฺฉูุงุณ MarketStructure** ๐
- **ูุฏู**: ุชุญูู ุณุงุฎุชุงุฑ ุจุงุฒุงุฑ ุจุฑ ุงุณุงุณ ููุงุท ูุญูุฑ ู ุชุดุฎุต ุฑููุฏ.
- **ูฺฺฏโูุง ฺฉูุฏ**:
  - ุดูุงุณุง ุณููโูุง ู ฺฉูโูุง ูุญูุฑ ุจุง ุงุณุชูุงุฏู ุงุฒ ุฑูฺฉุฑุฏ ูุฑฺฉุชุงู. ๐๐ฝ
  - ุชุดุฎุต ุฌูุช ุฑููุฏ (ุตุนูุฏุ ูุฒูู ุง ุฑูุฌ) ุจุฑ ุงุณุงุณ ุงูฺฏููุง HH/HL ู LL/LH.
  - ุฑุฏุงุจ ุฑูุฏุงุฏูุง ุดฺฉุณุช ุณุงุฎุชุงุฑ (BoS) ู ุชุบุฑ ฺฉุงุฑุงฺฉุชุฑ (CHoCH).
  - ุชุฑุณู ุณุทูุญ ูุจููุงฺ ูพูุง ุจุฑุง ุชุฃุฏ ููุงุท ูุญูุฑ (ุจู ุทูุฑ ูพุดโูุฑุถ 35% ุงุตูุงุญ).
  - ููุงุด ููุงุท ูุญูุฑ ู ูุจูโูุง ุฑููุฏ ุจุง ูพุณููุฏูุง ุฎุงุต ุชุงูโูุฑู (ูุงููุฏ `(4H)` ุจุฑุง ุชุงูโูุฑู H4).

### 2. **ฺฉูุงุณ FVGManager** ๐ฒ
- **ูุฏู**: ูุฏุฑุช ุดูุงุณุง ู ุงุจุทุงู ุดฺฉุงูโูุง ุงุฑุฒุด ููุตูุงูู.
- **ูฺฺฏโูุง ฺฉูุฏ**:
  - ุดูุงุณุง FVGูุง ุตุนูุฏ ู ูุฒูู ุจุฑ ุงุณุงุณ ุงูฺฏููุง ุณู ฺฉูุฏู ุจุง ููุชุฑ ุจุฏูู ูู. ๐ฏ๏ธ
  - ุงุจุทุงู FVGูุง ุฏุฑ ูุญุธู ุจุง ุงุณุชูุงุฏู ุงุฒ ุจุฑุฑุณ ููุชโูุง Bid/Ask ุฏุฑ ูุฑ ุชฺฉ.
  - ุชุฑุณู ููุงุญ FVG ุจู ุตูุฑุช ูุณุชุทู ุฑู ฺุงุฑุช ุจุง ูุจูโูุง ูุชู ูุชูุฑฺฉุฒ ุฏุฑ ูุงุญู.
  - ูุญุฏูุฏ ฺฉุฑุฏู ุชุนุฏุงุฏ FVGูุง ุจู 30 ูุงุญู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุจุงุฑ ุงุถุงู ุญุงูุธู.
  - ูพุดุชุจุงู ุงุฒ ููุงุด ฺูุฏ ุชุงูโูุฑู ุจุง ูพุณููุฏูุง ูุงุถุญ ุชุงูโูุฑู.

---

## ๐ ุฑุงูููุง ุงุณุชูุงุฏู

### 1. **ุฑุงูโุงูุฏุงุฒ ุงููู** ๐
- ูููููโูุง ุงุฒ ฺฉูุงุณโูุง `MarketStructure` ู `FVGManager` ุฑุง ุฏุฑ ุชุงุจุน `OnInit()` ุงฺฉุณูพุฑุช ุฎูุฏ ุงุฌุงุฏ ฺฉูุฏ.
- ูุซุงู:
  ```cpp
  MarketStructure *H1_Struct = new MarketStructure(_Symbol, PERIOD_H1, ChartID(), true, true, 35, 10);
  FVGManager *H1_FVG = new FVGManager(_Symbol, PERIOD_H1, ChartID(), true, true);
  ```

### 2. **ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง** ๐
- **ุฏุฑ OnTick() ุง OnTimer()**:
  - ูุชุฏ `ProcessNewTick()` ุฑุง ุจุฑุง `FVGManager` ูุฑุงุฎูุงู ฺฉูุฏ ุชุง ุงุจุทุงู FVG ุฏุฑ ูุฑ ุชฺฉ ุจุฑุฑุณ ุดูุฏ.
  - ูุชุฏ `ProcessNewBar()` ุฑุง ุจุฑุง ูุฑ ุฏู ฺฉูุงุณ ุฏุฑ ุฒูุงู ุจุณุชู ุดุฏู ฺฉูุฏู ุฌุฏุฏ ูุฑุงุฎูุงู ฺฉูุฏ ุชุง ุณุงุฎุชุงุฑ ุจุงุฒุงุฑ ู FVGูุง ุฌุฏุฏ ุจูโุฑูุฒุฑุณุงู ุดููุฏ.
- ูุซุงู:
  ```cpp
  if(IsNewBar(PERIOD_H1))
  {
      H1_Struct.ProcessNewBar();
      H1_FVG.ProcessNewBar();
  }
  H1_FVG.ProcessNewTick();
  ```

### 3. **ุฏุณุชุฑุณ ุจู ุฏุงุฏูโูุง** ๐
- ุงุฒ ูุชุฏูุง ุฏุณุชุฑุณ ุจุฑุง ุงุณุชุฎุฑุงุฌ ุฏุงุฏูโูุง ููุฑุฏ ูุงุฒ ุจุฑุง ููุทู ูุนุงููุงุช ุงุณุชูุงุฏู ฺฉูุฏ:
  - `MarketStructure`:
    - `GetLastSwingHigh()`: ุขุฎุฑู ุณูู ูุญูุฑ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
    - `GetLastSwingLow()`: ุขุฎุฑู ฺฉู ูุญูุฑ ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
    - `GetCurrentTrend()`: ุฑููุฏ ูุนู (ุตุนูุฏุ ูุฒูู ุง ุจุฏูู ุฑููุฏ) ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
    - `GetLastChoChTime()`: ุฒูุงู ุขุฎุฑู CHoCH ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
    - `GetLastBoSTime()`: ุฒูุงู ุขุฎุฑู BoS ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
  - `FVGManager`:
    - `GetFVG(index)`: FVG ุฏุฑ ุงูุฏุณ ูุดุฎุต ุดุฏู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.
    - `GetFVGCount()`: ุชุนุฏุงุฏ FVGูุง ูุนุงู ุฑุง ุจุฑูโฺฏุฑุฏุงูุฏ.

### 4. **ฺฉูุชุฑู ููุงุด** ๐ผ๏ธ
- ููุงุด ุชุฑุณูุงุช ุฑู ฺุงุฑุช ุฑุง ุจุง ูพุงุฑุงูุชุฑ `showDrawing` ุฏุฑ ุณุงุฒูุฏู ูุนุงู ุง ุบุฑูุนุงู ฺฉูุฏ.
- ุนูุงุตุฑ ุจุตุฑ ุดุงูู:
  - ููุงุท ูุญูุฑ ุจุง ููุดโูุง ู ูุจูโูุง (ูุงููุฏ `H (4H)` ุง `L (4H)`).
  - ููุงุญ FVG ุจู ุตูุฑุช ูุณุชุทูโูุง ูพุฑุดุฏู ุจุง ูุจูโูุง ูุชู ูุชูุฑฺฉุฒ (ูุงููุฏ `FVG (4H)`).
  - ูุจููุงฺ ูพูุง ุจุฑุง ุฑุฏุงุจ ุชุฃุฏ ููุงุท ูุญูุฑ.
  - ูุจูโูุง ุฑููุฏ ฺฉู ูุถุนุช ุตุนูุฏุ ูุฒูู ุง ุฑูุฌ ุฑุง ูุดุงู ูโุฏููุฏ.

---

## ๐ ูพุดโูุงุฒูุง

- **ูพูุชูุฑู**: MetaTrader 5 (ูพุดุชุจุงู ุงุฒ ุชูุงู ูุณุฎูโูุง).
- **ุฒุจุงู ุจุฑูุงููโููุณ**: MQL5.
- **ูุงุจุณุชฺฏโูุง**: ูฺ (ฺฉุชุงุจุฎุงูู ูุณุชูู).
- **ุญุฏุงูู ุชุนุฏุงุฏ ฺฉูุฏูโูุง**: ุญุฏุงูู 4 ฺฉูุฏู ุจุฑุง ุดูุงุณุง FVG ู `fractalLength * 2 + 1` ฺฉูุฏู ุจุฑุง ุชุญูู ุงููู ุณุงุฎุชุงุฑ ุจุงุฒุงุฑ.

---

## ๐๏ธ ูุตุจ

1. **ุฏุงูููุฏ**: ูุงู `MarketStructureLibrary.mqh` ุฑุง ุงุฒ ุงู ูุฎุฒู ฺฉููู ุง ุฏุงูููุฏ ฺฉูุฏ.
2. **ูุฑุงุฑ ุฏุงุฏู ุฏุฑ MetaTrader 5**: ูุงู ุฑุง ุฏุฑ ูพูุดู `MQL5/Include` ุฏุฑ ูุญู ูุตุจ MetaTrader 5 ฺฉูพ ฺฉูุฏ.
3. **ุงุถุงูู ฺฉุฑุฏู ุจู ุงฺฉุณูพุฑุช**: ุฎุท ุฒุฑ ุฑุง ุฏุฑ ุงุจุชุฏุง ฺฉุฏ ุงฺฉุณูพุฑุช ุฎูุฏ ุงุถุงูู ฺฉูุฏ:
   ```cpp
   #include <MarketStructureLibrary.mqh>
   ```
4. **ฺฉุงููพุงู**: ุงฺฉุณูพุฑุช ุฎูุฏ ุฑุง ุฏุฑ MetaEditor ฺฉุงููพุงู ฺฉูุฏ ุชุง ุงุฒ ุงุชุตุงู ุตุญุญ ฺฉุชุงุจุฎุงูู ุงุทููุงู ุญุงุตู ุดูุฏ. ๐

---

## ๐ ูุซุงู ุงุณุชูุงุฏู

ุฏุฑ ุฒุฑ ฺฉ ุงฺฉุณูพุฑุช ุณุงุฏู ุจุฑุง ูุดุงู ุฏุงุฏู ูุญูู ุงุณุชูุงุฏู ุงุฒ ฺฉุชุงุจุฎุงูู ุงุฑุงุฆู ุดุฏู ุงุณุช:

```cpp
#include <MarketStructureLibrary.mqh>

MarketStructure *structH1;
FVGManager *fvgH1;

int OnInit()
{
   structH1 = new MarketStructure(_Symbol, PERIOD_H1, ChartID(), true, true, 35, 10);
   fvgH1 = new FVGManager(_Symbol, PERIOD_H1, ChartID(), true, true);
   return(INIT_SUCCEEDED);
}

void OnDeinit(const int reason)
{
   delete structH1;
   delete fvgH1;
}

void OnTick()
{
   if(IsNewBar(PERIOD_H1))
   {
      structH1.ProcessNewBar();
      fvgH1.ProcessNewBar();
   }
   fvgH1.ProcessNewTick();

   // ูุซุงู: ุฏุณุชุฑุณ ุจู ุขุฎุฑู ุณูู ูุญูุฑ ู ุฑููุฏ
   SwingPoint lastHigh = structH1.GetLastSwingHigh();
   TREND_TYPE trend = structH1.GetCurrentTrend();
   Print("ุขุฎุฑู ุณูู ูุญูุฑ: ", DoubleToString(lastHigh.price, _Digits), " | ุฑููุฏ: ", EnumToString(trend));
}

bool IsNewBar(ENUM_TIMEFRAMES timeframe)
{
   static datetime lastBar = 0;
   datetime currentBar = iTime(_Symbol, timeframe, 0);
   if(lastBar != currentBar)
   {
      lastBar = currentBar;
      return true;
   }
   return false;
}
```

---

## ๐ง ุณูุงุฑุดโุณุงุฒ

- **ุณุทุญ ุชุฃุฏ ูุจููุงฺ**: ููุฏุงุฑ `fibUpdateLevel` ุฑุง ุฏุฑ ุณุงุฒูุฏู `MarketStructure` ุชุบุฑ ุฏูุฏ ุชุง ุณุทุญ ุงุตูุงุญ ุชุบุฑ ฺฉูุฏ (ูพุดโูุฑุถ: 35%).
- **ุทูู ูุฑฺฉุชุงู**: ููุฏุงุฑ `fractalLength` ุฑุง ุจุฑุง ฺฉูุชุฑู ุญุณุงุณุช ุดูุงุณุง ููุงุท ูุญูุฑ ุชูุธู ฺฉูุฏ (ูพุดโูุฑุถ: 10 ฺฉูุฏู).
- **ูุงฺฏโฺฏุฑ**: ูุงฺฏโฺฏุฑ ุฑุง ุจุง ูพุงุฑุงูุชุฑ `enableLogging` ูุนุงู ุง ุบุฑูุนุงู ฺฉูุฏ.
- **ููุงุด ุจุตุฑ**: ุชุฑุณูุงุช ุฑู ฺุงุฑุช ุฑุง ุจุง ูพุงุฑุงูุชุฑ `showDrawing` ูุนุงู ุง ุบุฑูุนุงู ฺฉูุฏ.

---

## โ๏ธ ูฺฉุงุช

- **ุนููฺฉุฑุฏ**: ฺฉุชุงุจุฎุงูู ุจุฑุง ุนููฺฉุฑุฏ ุจููู ุทุฑุงุญ ุดุฏู ู ุชุนุฏุงุฏ FVGูุง ุฑุง ุจู 30 ููุฑุฏ ูุญุฏูุฏ ูโฺฉูุฏ ุชุง ุงุฒ ูุดฺฉูุงุช ุญุงูุธู ุฌููฺฏุฑ ุดูุฏ.
- **ูุฏุฑุช ุฎุทุงูุง**: ุชูุงู ุชูุงุจุน ุดุงูู ุจุฑุฑุณโูุง ุจุฑุง ุฌููฺฏุฑ ุงุฒ ฺฉุฑุด ูุณุชูุฏุ ูุงููุฏ ุงุนุชุจุงุฑุณูุฌ ุชุนุฏุงุฏ ฺฉูุฏูโูุง ู ุงูุฏุงุฒู ุขุฑุงูโูุง.
- **ุฑูุน ูุดุฏุงุฑูุง**: ฺฉุชุงุจุฎุงูู ุจูโุฑูุฒ ุดุฏู ุชุง ุชูุงู ูุดุฏุงุฑูุง ุชุจุฏู ููุน ุถูู ุฑุง ุจุฑุทุฑู ฺฉูุฏ ู ุจุง ุชูุธูุงุช ุณุฎุชโฺฏุฑุงูู MQL5 ุณุงุฒฺฏุงุฑ ุจุงุดุฏ.

---

## ๐ฌ ุชูุงุณ ู ูพุดุชุจุงู

ุจุฑุง ุณุคุงูุงุชุ ฺฏุฒุงุฑุด ุจุงฺฏ ุง ุฏุฑุฎูุงุณุช ูฺฺฏโูุง ุฌุฏุฏุ ูุทูุงู ฺฉ ูุณุฆูู (Issue) ุฏุฑ ุงู ูุฎุฒู GitHub ุจุงุฒ ฺฉูุฏ. ๐ฉ

---

## ๐ ูุฌูุฒ

ุงู ูพุฑูฺู ุชุญุช ูุฌูุฒ MIT ููุชุดุฑ ุดุฏู ุงุณุช. ุจุฑุง ุฌุฒุฆุงุชุ ูุงู `LICENSE` ุฑุง ุจุจูุฏ. ๐

---

**ูุนุงููู ูููู ุฏุงุดุชู ุจุงุดุฏ!** ๐ฐ

</xaiArtifact>
